<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI English ‚Äì Game H·ªçc Anh VƒÉn</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #eef1f5;
  padding: 15px;
}
.card {
  background: white;
  padding: 15px;
  border-radius: 12px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.15);
}
.level {
  font-weight: bold;
  margin-bottom: 10px;
}
button {
  width: 100%;
  padding: 10px;
  margin-top: 8px;
  border: none;
  border-radius: 8px;
  background: #007bff;
  color: white;
  font-size: 16px;
}
button:active { background: #0056b3; }
ul { padding-left: 20px; }
.badge {
  margin-top: 5px;
  font-size: 14px;
  color: #555;
}
</style>
</head>

<body>

<div class="card">
  <div class="level" id="levelInfo"></div>
  <h2 id="sentence"></h2>

  <button onclick="speak()">üîä Nghe ph√°t √¢m</button>
  <button onclick="showDetail()">üìò Gi·∫£i th√≠ch chi ti·∫øt</button>
  <div id="detail"></div>
</div>

<script>
// ====== DATA ======
const lessons = [
  {
    level: 1,
    en: "Hello!",
    ipa: "/h…ôÀàl…ô ä/",
    vi: "Xin ch√†o!",
    context: "Ch√†o h·ªèi c∆° b·∫£n.",
    example: "Hello! Nice to meet you.",
    vocab: [
      { word: "Hello", meaning: "xin ch√†o" }
    ]
  },
  {
    level: 5,
    en: "How are you?",
    ipa: "/ha ä …ëÀê juÀê/",
    vi: "B·∫°n kh·ªèe kh√¥ng?",
    context: "Ch√†o h·ªèi x√£ giao.",
    example: "How are you today?",
    vocab: [
      { word: "How", meaning: "nh∆∞ th·∫ø n√†o" },
      { word: "are", meaning: "th√¨ hi·ªán t·∫°i c·ªßa to be" },
      { word: "you", meaning: "b·∫°n" }
    ]
  },
  {
    level: 12,
    en: "I am looking for a job.",
    ipa: "/a…™ √¶m Ààl äk…™≈ã f…îÀêr …ô d í…íb/",
    vi: "T√¥i ƒëang t√¨m vi·ªác.",
    context: "N√≥i v·ªÅ c√¥ng vi·ªác.",
    example: "I am looking for a job in the city.",
    vocab: [
      { word: "I", meaning: "t√¥i" },
      { word: "am", meaning: "to be" },
      { word: "looking for", meaning: "t√¨m ki·∫øm" },
      { word: "job", meaning: "c√¥ng vi·ªác" }
    ]
  }
];

// ====== PLAYER ======
let exp = 0;
let level = 1;
let index = 0;

// ====== LEVEL NAME (LMHT STYLE) ======
function rankName(lv) {
  if (lv <= 5) return "ü™µ T√¢n Th·ªß";
  if (lv <= 10) return "ü•â ƒê·ªìng";
  if (lv <= 20) return "ü•à B·∫°c";
  if (lv <= 30) return "ü•á V√†ng";
  if (lv <= 40) return "üíé B·∫°ch Kim";
  return "üëë Kim C∆∞∆°ng";
}

// ====== LOAD ======
function loadLesson() {
  const available = lessons.filter(l => l.level <= level);
  index = Math.floor(Math.random() * available.length);
  document.getElementById("sentence").innerText = available[index].en;
  document.getElementById("detail").innerHTML = "";
  document.getElementById("levelInfo").innerText =
    `C·∫•p ${level} ‚Äì ${rankName(level)} | EXP: ${exp}/100`;
}

// ====== DETAIL ======
function showDetail() {
  const l = lessons[index];
  let vocabHTML = "<ul>";
  l.vocab.forEach(v => {
    vocabHTML += `<li><b>${v.word}</b>: ${v.meaning}</li>`;
  });
  vocabHTML += "</ul>";

  document.getElementById("detail").innerHTML = `
    <p><b>Phi√™n √¢m:</b> ${l.ipa}</p>
    <p><b>Nghƒ©a:</b> ${l.vi}</p>
    <p><b>Ng·ªØ c·∫£nh:</b> ${l.context}</p>
    <p><b>V√≠ d·ª•:</b> ${l.example}</p>
    <p><b>T·ª´ v·ª±ng:</b></p>
    ${vocabHTML}
    <button onclick="gainExp()">‚úÖ ƒê√£ hi·ªÉu (nh·∫≠n EXP)</button>
  `;
}

// ====== EXP SYSTEM ======
function gainExp() {
  exp += 10;
  if (exp >= 100) {
    exp -= 100;
    level++;
    alert("üéâ L√äN C·∫§P! Hi·ªán t·∫°i: " + rankName(level));
  }
  loadLesson();
}

// ====== SPEAK ======
function speak() {
  const msg = new SpeechSynthesisUtterance(
    document.getElementById("sentence").innerText
  );
  msg.lang = "en-US";
  speechSynthesis.speak(msg);
}

loadLesson();
</script>

</body>
</html>
